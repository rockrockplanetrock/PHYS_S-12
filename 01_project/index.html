<html lang="en">
<head>
  <title>PHYS S-12: Intro to Digital Fabrication </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> 
  <link href="../style.css" rel="stylesheet">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/arduino.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<style>
  h3 {
    text-align: center;
    color: black;}
  
  body {
    background-color: yellow;
    text-align: center;
    width:100%;}

  a {
    color: purple;
  } 
  div {
  padding: 50px;
  border: 5px solid #00000;
    }
</style>

<body>
<html lang="en">
<head>
  <title>PHYS S-12: Intro to Electronics </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> 
  <link href="../style.css" rel="stylesheet">
  <h2>Class 7: Sensors</h2><br> 
</head>
</body>


#Inspiration
#Fabrication Process
#Finished Project

#Inspiration
*copy-paste from other pages*

#FabPro

1. 3D Modelling + Files
2. gather materials (list)

<h1>Fabrication Process</h1>
<h2>3D Models Constructed in Fusion 360</h2>
<p> I first downloaded the CAD file for the conical spring from <a href="www.com">the distributer's website</a> in order to build the spikes. With the spring acting as a skeleton, I was able to construct the spike tip and base around it, taking the compression into account. I ended up creating a few iterations of this design, but below are the finalized version of the associated files. I had a local shop 3D print four of each in black PLA. </p>
<img src="./3dmodel_gif.gif">
<img src="./finalfusionpic.png">

<h3>Spike Tips</h3>
<p>The tips were made such that the top of the spring nestled in snugly at the base, even though my first design had the spring fed through a fitted channel in the top piece. At the spike's base was a loop for the string to pass through (which could have been a bit smaller, in retrospect); this held up through all of my spring compression tests. At the bottom edge of the tip, I made several holes so I could sew on a sheath if wanted later on.</p>
<br>
<h3>Spike Bases</h3>
<p> I initially wanted to incorporate rollers in the base loops to reduce friction of the system, but it proved challenging to create in Fusion 360. The base had two loops for the string to feed through, a channel for the bottom part of the spring to sit (not deep enough), as well as holes to sew through. Like the loop in the spike tip, I wish I had modelled it smaller, thus allowing for complete spike compression. Regardless, the bases were very sturdy and well-suited to this project.</p>
<br>

<p> Here are the files for the 3D printed components:
<a download href='./spring1_v4.stl'>Download my STL file</a>
<ul>
<li><a download href="./fullspikespring.f3d">Complete Fusion 360 File</a></li>
<li><a download href="./spikebasef360.png">Spike Base Fusion360 File</a></li>
<li><a download href="./springbase.stl">Spike Base STL File</a></li>
<li><a download href="springbase_0.15mm_PLA_MINI.gcode">Spike Base GCode</a></li>
<li><a download href="./spiketipf360.png">Spike Tip Fusion 360 File</a></li>
<li><a download href="./spiketip.stl">Spike Tip File</a></li>
<li><a download href="./spiketip_0.15mm_PLA_MINI.gcode">Spike Tip GCode</a></li>
</ul></p>
<br>
<br>
<h2> Materials + Tools</h2>
<ul>
  <li>2 x <a href="https://www.omc-stepperonline.com/nema-17-bipolar-1-8deg-26ncm-36-8oz-in-0-4a-12v-42x42x34mm-4-wires.html">Nema 17 Bipolar 1.8deg 26Ncm (36.8oz.in) 0.4A 12V 42x42x34mm 4 Wires</a></li>
  <li>2 x <a href="https://www.mpja.com/L9110-H-Bridge-Power-Driver-Dual-Channel-for-Arduino/productinfo/31596%20MP/">L9110 H Bridge Power Driver</a></li> 
  <li>1 x  <a href="https://www.adafruit.com/product/3505?gclid=EAIaIQobChMIk6iKn_SX6gIVF8DICh0tzwA4EAAYASAAEgJm7vD_BwE">Adafruit Metro M0 Express</a></li>
<br> OR
  <li>2 x <a href="https://www.adafruit.com/product/3591">Adafruit HUZZAH32 - ESP32 Feather Board</a></li>
  <li>4 x <a href="https://www.digikey.com/product-detail/en/century-spring-corp/TA-2259CS/2343-TA-2259CS-ND/11663306">3.5" Conical Springs from Century Spring Corp.</a></li>
  <li>1 x <a href="https://www.amazon.com/seeed-studio-Seeedstudio-Grove-sensor/dp/B012TNYDE4">seeed studio Grove GSR Sensor</a></li>
  <li>2 x plastic spools to put on motor shafts </li>
  <li><b>Assorted supplies + tools:</b> electrical tape, thick vinyl, grommets, scalpel, leather punch, belt buckle, nylon fishing line, heavy duty thread, wires (F:F, M:M), breadboard, 5V USB power bank + cord, Dremel</li></ul>
<br>
<br>
<h2>Which Board: Metro M0 Express or HUZZAH32?</h2>
<p>I began this project using two Huzzah32 boards, as I was so excited about the board-to-board direct communication facilitated by the ESP-NOW protocol. Here are the resources I found most helpful for ESP32 connection.</p>
<br>
  <ul>
    <li>https://randomnerdtutorials.com/esp32-servo-motor-web-server-arduino-ide/</li>
    <li>https://nathanmelenbrink.github.io/intro-dig-fab/09_networking/huzzah1b.html</li>
  </ul>
<br>
<h2>GSR Sensor</h2>
<a href="http://www.cwwang.com/2008/04/13/gsr-reader/">Che-Wei Wang's GSR project</a> was incredibly interesting, but he revealed that the interpretation of the sensor data would require Processing/p5* to compute.

BEST:http://produceconsumerobot.com/truth/


<h2>Code</h2>
<p>My code was compiled using the codes (<a href="https://roberthart56.github.io/SCFAB/SC_lab/Sensors/average.txt">1,</a> <a href="https://nathanmelenbrink.github.io/intro-dig-fab/10_machines/serial_setpoint_1.txt">2</a>) from the course website and inspired by the work of others GSR sensors (linked above). </p>
<br>
<iframe src=https://create.arduino.cc/editor/sparklellama/a93e559b-5b13-4d6e-b53d-7ec9af988dcc/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe>
<br>
<br>

<p>Alternatively, this set is for the Adafruit HUZZAH ESP32 boards. First is the sender (connected to the sensor) and the second is the receiver. </p>
<iframe src=https://create.arduino.cc/editor/sparklellama/6a38a827-d105-4d90-b882-b84c0c2a80e2/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe>
<br>
<iframe src=https://create.arduino.cc/editor/sparklellama/558a824a-e0fb-4b42-912c-5c03e180c0f5/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe>
<br>
<h2>Methodology, Testing, + Wiring</h2>
<p>I wanted to have both motors running simultaneously, but for safety reasons I staggered them. If I proceeded as initially planned, I would have consulted <a href="https://www.arduino.cc/en/tutorial/BlinkWithoutDelay">BlinkWithoutDelay</a> or <a href="https://forum.arduino.cc/index.php?topic=93706.0">this helpful forum. The latter resource inspired me to have each motor run fewer steps per loop interchangably. Upon testing this, I found this to be least hazardous. </p>
<br>
<p>According to the <a href="https://wiki.seeedstudio.com/Grove-GSR_Sensor/">GSR sensor manufacturer seeed</a>, the sensor must be calibrated by adjusting a screw on the board until the baseline serial reading is 512. Unfortunately, I found this impossible for the first and second sensors I bought.
I found that the reading is either 100-0, 2300+, or 1700/1800 initially and drifts randomly over time. I troubleshooted this by equating a signal (indicating a stress state) with a negative slope or comparison of binned y-values, but this did not work. I knew that signal processing with with a bandpass filter seemed inevitable and unnecessarily complicated, so I also tried to implement linear regression as a work around. Through iterative observation, I realized that a signal during the first 5-10 minutes or so of wearing the sensors could be any value less than 500 or 600, so I stuck with that as the physical fabrication required my time.


https://en.wikipedia.org/wiki/Electrodermal_activity
http://produceconsumerobot.com/truth/</p>

<h2>Construction</h2>
<img src="./sc_3dprintedbase.jpg">
<img src="./sc_attachcollar.jpg">

<img src="./petra.jpg" style="width:40%>
<img src="./postitideas.jpg" style="width:40%>
<img src="./sc_back1.jpg" style="width:40%>
<img src="./sc_backlong.jpg" style="width:40%>
<img src="./sc_breadboard.jpg" style="width:40%>
<img src="./sc_gsrshield" style="width:40%>
<img src="./sc_handsensor.jpg" style="width:40%>
<img src="./sc_hbridge.jpg" style="width:40%>
<img src="./hbridgetangle.jpg" style="width:40%>
<img src="./sc_leatherpunch.jpg" style="width:40%>
<img src="./sc_metroboard1.jpg" style="width:40%>
<img src="./sc_metroboard2.jpg" style="width:40%>
<img src="./sc_portrait1.jpg" style="width:40%>
<img src="./sc_portrait2.jpg" style="width:40%>
<img src="./sc_selfiewide.jpg" style="width:40%>
<img src="./sc_sewnon.jpg" style="width:40%>
<img src="./sc_springs.jpg" style="width:40%>
<img src="./gsr_truthsensor.png" style="width:40%>


<h1>Final Project</h1>
<p>Blah blah blah</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Fm5Zi0R7mf0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
Improvements to be made

I downloaded the <a href="http://www.airspayce.com/mikem/arduino/AccelStepper/">AccelStepper library</a> from the Arduino IDE Library Manager. 
Example 2: https://www.makerguides.com/l298n-stepper-motor-arduino-tutorial/
Reasons why I'm using a stepper "Stepper motors have a number of benefits. They are cheap and easy to use. When there is no current send to the motor, the steppers firmly hold their position. Stepper motors can also rotate without limits and change direction based on the polarity provided.:


Talking about H-bridges https://www.instructables.com/id/Controlling-a-Stepper-Motor-with-an-Arduino/